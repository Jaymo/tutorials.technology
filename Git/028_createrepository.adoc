[[firstgit]]

== Your first workflow with a local Git repository

[[firstgit_createrepotarget]]

=== Target of this chapter

In this chapter you learn how to create a local Git repository and to place files and their changes under version
control.


The comments (marked
with #) before the commands explain the specific actions.

Open a command shell for the operations.

[[firstgit_directory]]

=== Create a directory

The following commands create an empty directory which is used later in
this exercise to contain the working tree and the Git repository.

[source,terminal]
----
include::./examples/commandline/gitrepo_createdirectory[]
----

[[firstgit_repository_creation]]

=== Create a new Git repository

The following explanation is based on a
non-bare repository. See <<gitterminology>> for the difference between a bare repository
and a non-bare repository with a _working tree_ .

Every Git repository is stored in the `.git` folder of the directory in
which the Git repository has been created. This directory contains the
complete history of the repository. The `.git/config` file contains the
configuration for the repository.

The following command creates a Git repository in the current directory.

[source,terminal]
----
include::./examples/commandline/gitrepo_create[]
---- 

All files inside the repository folder excluding the `.git` folder
are the _working tree_ for a Git repository.


[[firstgit_content]]

=== Create new content

Use the following commands to create several new files.

[source,terminal]
----
include::./examples/commandline/first.commands[]
---- 

[[firstgit_repostatus]]
=== See the current status of your repository



The `((git status))` command shows the status of the working tree, i.e. which files have changed, which are
staged and which are not part of the staging area. It also shows which
files have conflicts and gives an indication what the user can do with
these changes, e.g., add them to the staging area or remove them, etc.

Run it via the following command.

[source,terminal]
----
include::./examples/commandline/first.status[]
---- 

The output looks similar to the following listing.

[source,terminal]
----
include::./examples/commandline/first.output[]
---- 
[[firstgit_repoadd]]
=== Add changes to the staging area



Before committing changes to a
Git repository you need to mark the changes that should be committed with the `((git add))` command.
This command allows adding changes in the file system to the staging area.
It creates a snapshot of the affected files.

[source,terminal]
----
include::./examples/commandline/gitrepo_add[]
---- 

Afterwards run the `git status` command again to see the current
status.

[source,terminal]
----
include::./examples/commandline/gitrepo_add.result[]
----
 
[[firstgit_changefiles]]
=== Change files that are staged

In case you change one of the staged files before committing, you need
to add it again to the staging area to commit the new changes. This is
because Git creates a snapshot of these staged files. All new changes
must again be staged.

[source,terminal]
----
include::./examples/commandline/gitrepo_changestaged[]
----

Validate that the new changes are not yet staged.

[source,terminal]
----
include::./examples/commandline/gitrepo_changestaged.result[]
----

Add the new changes to the staging area.

[source,terminal]
----
include::./examples/commandline/gitrepo_add[]
----

Use the `git status` command again to see that all changes are staged.

[source,terminal]
----
include::./examples/commandline/gitrepo_changestaged.finalresult[] 
----

[[firstgit_repocommit]]

=== Commit staged changes to the repository

After adding the files to the Git staging area, you can commit them to the Git repository with the `((git commit))` command. 
This creates a new commit object with the staged changes in the Git
repository and the HEAD reference points to the new commit. The `-m`
parameter allows you to specify the commit message. If you leave this
parameter out, your default editor is started and you can enter the
message in the editor.

[source,terminal]
----
include::./examples/commandline/gitrepo_commit[]
----

[[firstgitresult]]

== Looking at the result

[[firstgitresult_results]]

=== Viewing the Git commit history

The Git operations you performed have created a local Git repository in
the `.git` folder and added all files to this repository via one commit.
Run the `git log` command (See ? for details).

[source,terminal]
----
include::./examples/gitfirst/gitlog.txt[] 
----

You see an output similar to the following.

[source,terminal]
----
include::./examples/gitfirst/gitlog-output.txt[]
---- 

[[firstgitresult_directory]]
=== Directory structure

Your directory contains the Git repository as well as the Git working
tree for your files. This directory structure is depicted in the
following screenshot.

image::img/firstgit-directory10.png[First Git directory] 


