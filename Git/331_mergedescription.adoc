[[combinechanges]]
= Merging branches

[[gitmerge_fastforward]]
== Fast-forward merge

(((Merging,fast-forward merge)))

If the commits which are merged are direct
successors of the _HEAD_ pointer of the current branch, Git simplifies
things by performing a so-called _fast forward merge_ . This _fast
forward merge_ simply moves the _HEAD_ pointer of the current branch to
the tip of the branch which is being merged. You can also merge based on
a tag or a commit.

This process is depicted in the following diagram. The first picture
assumes that master is checked out and that you want to merge the
changes of the branch labeled "branch 1" into your "master" branch. Each
commit points to its predecessor (parent).

image::img/merge_fastforward10.png[Fast forward merge starting]

After the fast-forward merge the _HEAD_ points to the
master branch pointing to "Commit 3". The "branch 1" branch points to
the same commit.

image::img/merge_fastforward20.png[Fast forward merge result]

 

== Merge commit \{#gitmerge_mergecommit}

(((Merging, merge commit)))
(((Merging, three-way-merge)))
(((Merging, Merge strategies)))
(((Merging, Recursive)))


If commits are merged which are not direct predecessors of the current
branch, Git performs a so-called _three-way-merge_ between the latest
commits of the two branches, based on the most recent common predecessor
of both.

image::img/merge_commit10.png[Original state before the merge commit]

As a result a so-called _merge commit_ is created on the
current branch which combines the respective changes from the two
branches being merged. This commit points to both of its predecessors.

image::img/merge_commit20.png[Merge commit] 

If multiple common predecessors exist, Git uses recursion to create a 
virtual common predecessor. For this Git creates a merged tree of the 
common ancestors and uses that as the reference for the 3-way merge. 
This is called the _recursive merge_ strategy and is the default merge
strategy.

[[gitmerge_octopus]]
== Merge strategies - Octopus, Subtree, Ours

(((Merge strategies, Octopus)))
(((Merge strategies, Subtree)))
(((Merge strategies, Ours)))
(((Merge strategies, Ours)))
(((Octopus merge strategy)))
(((Subtree merge strategy)))
(((Ours merge strategy)))

If a fast-forward merge is not possible, Git
uses a merge strategy. The default strategy called _recursive merge_
strategy was described in <<gitmerge_mergecommit>>.

The Git command line tooling also supports the _octopus merge_ strategy
for merges of multiple references. With this operation it can merge
multiple branches at once.

The `subtree` option is useful when you want to merge in another project
into a sub-directory of your current project. It is rarely used and you
should prefer the usage of Git submodules. See ? for more information.

The `ours` strategy merges a branch without looking at the changes
introduced in this branch. This keeps the history of the merged branch
but ignores the changes introduced in this branch.

You typically use the _ours_ merge strategy to document in the Git
repository that you have integrated a branch and decided to ignore all
changes from this branch.
